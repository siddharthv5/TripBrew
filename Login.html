<!DOCTYPE>
<html>
<div class="Whole">
  <head>
  <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
   
  <title> TripBrew - Login</title>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/ie10-viewport-bug-workaround.css">
  <link rel="stylesheet" type="text/css" href="css/carousel.css">
  <link rel="stylesheet" type="text/css" href="css/signin.css">

  <link href="https://fonts.googleapis.com/css?family=Bubbler+One|Bungee+Inline|Calligraffitti|Caveat|Delius|Fredericka+the+Great|Grand+Hotel|Indie+Flower|Josefin+Sans|Josefin+Slab|Mallanna|Merienda|Patrick+Hand+SC|Petit+Formal+Script|Quattrocento+Sans|Shadows+Into+Light+Two|Walter+Turncoat" rel="stylesheet">


  <link href="https://fonts.googleapis.com/css?family=Bubbler+One|Bungee+Inline|Fredericka+the+Great|Indie+Flower|Josefin+Sans|Josefin+Slab|Patrick+Hand+SC|Quattrocento+Sans|Shadows+Into+Light+Two|Walter+Turncoat" rel="stylesheet">


  <script type="text/javascript" src="js/ie-emulation-modes-warning.js"></script>

  <style type="text/css">
    .login{
      margin-top: 100px; 
    }
  
    .footer{
      margin-top: 300px; margin-left: 200px
    }

    .Signup{
      margin-left: 460px
    }

  </style>

  </head>


<body background="images/bg1.png" padding-bottom: 0px">

 <div class="navbar-wrapper">
      <div class="container">

<body style="background-color: #f5f5f5">
  
    <div class="navbar-wrapper">
      <div class="container" style="height: auto">


        <nav class="navbar navbar-inverse navbar-static-top" style="background-color:transparent !important;border-color:transparent;
      background-image:none;">
          <div class="container">

            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>



             <a class="navbar-brand" href="homepage.html" style="font-family:'Bubbler One',sans-serif; font-size: 30px; color:#ffffff; padding-top:0 !important;">
              <img src="images/logorev.png" class="img-responsive" style="width: 150px;height: 60px;">
              </a>


            </div>

            <div id="navbar" class="navbar-collapse collapse" style="font-family: 'Bubbler One', sans-serif; font-size: 20px;">
              <ul class="nav navbar-nav">
                <li><a href="homepage.html" style="color:#000000"><strong>Home</strong></a></li>
                <li><a href="savedplans.html" style="color:#000000"><strong>My Plan</strong></a></li>
                <li><a href="recommended.html" style="color:#000000"><strong>Recommended</strong></a></li>
                <li><a href="aboutus.html" style="color:#000000"><strong>About Us</strong></a></li>

          
               </ul>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> 
               <ul class="nav navbar-nav navbar-right"> 

                 <li>
                  <a href="login.html" style="color:#000000;display: none;" id="header_login">
                    <b> Login</b>
                  </a>
                </li>

                <li> 
                  <a href="customersignup.html" style="color:#000000; display: none;" id="header_signup">
                    <b>Sign Up</b>
                  </a>
                </li>

                <li> 
                  <a href="#" style="color:#000000; display: none;" id="header_logout">
                    <b>Logout</b>
                  </a>
                </li>
              </ul>

              <form class="navbar-form navbar-right">
              <div class="form-group">
              <input type="text" class="form-control" placeholder="Name of a City...">
              </div>
              <button type="submit" class="btn btn-default" style="color:#000000">Submit</button>
            </form>
            </div>

            </div>
          </div>
        </nav>

      </div>
    </div>


<!--Login Page!!-->

    <div class="container login">

      <form class="form-signin">

        <h2 class="form-signin-heading" style="font-family: 'Josefin Slab', serif; font-size: 40px"> <b>Please log in</h2></b>
        <label for="inputEmail" class="sr-only">Email address</label>
        <input type="text" id="email" class="form-control" placeholder="Email address" required autofocus><br>

        <label for="inputPassword" class="sr-only">Password</label>
        <input type="password" id="password" class="form-control" placeholder="Password" required>
        <div class="checkbox">
          <label>
            <input type="checkbox" value="remember-me"> Remember me
          </label>
        </div>

        <input type="button" class="btn btn-lg btn-primary btn-block" onclick="signInUser()" value='Login'></input>

    </form>
<h2 style="font-family:'Delius', cursive; font-size:  30px"> <strong> <center> Or </h2></center></strong> <br>
    

   <center><button class="btn btn-danger btn-lg" id="login_with_google" style="display: none;">Login with Google</button></center>
      <center><button class="btn btn-warning btn-lg" id="logout" style="display: none;">Logout</button></center>
</div>

<!--Sign Up Redirect-->
<br>
 <div class="Signup">
<p>Don't have an account? Sign up <a href="customersignup.html">here</a>.</p>
<br>
<p><a href="forgotpassword.html" >Forgot your password?</a></p>


 </div>  


 <!-- FOOTER -->
    <div class="footer">
       <footer>
        <p class="pull-right"><a href="#"></a></p>
        <p style="font-size:20px; font-family:'Indie Flower',cursive !important;"> &copy; 2017 TripBrew Company, Inc. &middot;<a href="vendorsignup.html">Register As Vendor</a></p>
      </footer>

    </div>



    <button class="btn btn-danger btn-lg" id="login_with_google" style="display: none;">Login with Google</button>
      <button class="btn btn-warning btn-lg" id="logout" style="display: none;">Logout</button>
    </div>
  </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <!-- Include your style sheets at the bottom of the page: -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/holder.min.js"></script>
  <script type="text/javascript" src="js/ie10-viewport-bug-workaround.js"></script>

  <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>

  <script type="text/javascript" src="js/custom.js"></script>

  <script type="text/javascript">

  function signOut() {
    
    if (firebase.auth().currentUser) {
      firebase.auth().signOut();
    }
  }

   /**
     * Handles the sign in button press.
     */
    function signInUser() {
      // if (firebase.auth().currentUser) {
      //   // [START signout]

      //   firebase.auth().signOut();
      //   // [END signout]
      // } else {
      var email = $('#email').val();
      var password = $('#password').val();
        if (email.length < 4) {
          alert('Please enter an email address.');
          return;
        }
        if (password.length < 4) {
          alert('Please enter a password.');
          return;
        }
        firebase.auth().signInWithEmailAndPassword(email, password)
        .then(function(user) {
          console.log("user : ", user);
          window.location = "myplan.html";

        }).catch(function(error) {
          // Handle Errors here.
          var errorCode = error.code;
          var errorMessage = error.message;
          if (errorCode === 'auth/wrong-password') {
            alert('Wrong password.');
          } else {
            alert(errorMessage);
          }
          console.log(error);
        });
      //}
    }

  </script>

<script>
  // Initialize Firebase

    //Create an instance of the Google provider object:
    var provider = new firebase.auth.GoogleAuthProvider();

    $('#login_with_google').click(function(){

      firebase.auth().signInWithPopup(provider).then(function(result) {
        // This gives you a Google Access Token. You can use it to access the Google API.
        var token = result.credential.accessToken;
        // The signed-in user info.
        var user = result.user;


        window.location = "myplan.html";
        // ...
      }).catch(function(error) {
        // Handle Errors here.
        var errorCode = error.code;
        var errorMessage = error.message;
        // The email of the user's account used.
        var email = error.email;
        // The firebase.auth.AuthCredential type that was used.
        var credential = error.credential;
        // ...
      });


    });

    /*
    
    
    */

  firebase.auth().onAuthStateChanged(function(user) {

    if (user) {
      // User is signed in.
      // 1. Logged In - Show Logout
      console.log("User is Logged In");
      console.log(user);
      console.log("Email:",user.email,user.displayName,user.photoURL);

      $('#logout').show();
      $('#user_details').show();

      $('#user_email').html(user.email);
      $('#user_name').html(user.displayName);
      $('#user_photo').attr('src',user.photoURL);

      $('#login_with_google').hide();

      // ...
    } else {
      // User is signed out.
      // 2. Logged Out/ Not Logged In - Show "Login with Google"
      console.log("User is not logged in");

      $('#logout').hide();
      $('#user_details').hide();
      $('#login_with_google').show();
      // ...
    }

  });

  $('#logout').click(function(){

    firebase.auth().signOut().then(function() {
      // Sign-out successful.
    }).catch(function(error) {
      
    });

  });




</script>
  

</body>

</html>
