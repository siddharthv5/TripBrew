<!DOCTYPE html>
<html>
<head>
<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
   
  <title>My Plan</title>
  <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="css/ie10-viewport-bug-workaround.css">
  <link rel="stylesheet" type="text/css" href="css/carousel.css">
  <link rel="stylesheet" type="text/css" href="css/Stylesheethome.css">
  <link href="https://fonts.googleapis.com/css?family=Bubbler+One|Bungee+Inline|Calligraffitti|Caveat|Delius|Fredericka+the+Great|Grand+Hotel|Indie+Flower|Josefin+Sans|Josefin+Slab|Mallanna|Merienda|Patrick+Hand+SC|Petit+Formal+Script|Quattrocento+Sans|Shadows+Into+Light+Two|Walter+Turncoat" rel="stylesheet">

   <link rel="stylesheet" href="bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css" />
  </head>

  <style type="text/css">
  	#other{
  		width: 75%;

  	}

    .table-striped{
      border: 1px solid #ccc;
    }
  </style>

<body background="images/bg1.png" style="padding-bottom: 0px">

 <div class="navbar-wrapper">
      <div class="container">

        <nav class="navbar navbar-inverse navbar-static-top" style="background-color:transparent !important; border-color:transparent; background-image:none; box-shadow:none;">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>


             <a class="navbar-brand" href="index.html" style="font-family:'Bubbler One',sans-serif; font-size: 30px; color:#ffffff; padding-top:0 !important;">
              <img src="images/logorev.png" class="img-responsive" style="width: 150px;height: 60px;">

              </a>

            </div>
            <div id="navbar" class="navbar-collapse collapse" style="font-family: 'Bubbler One', sans-serif; font-size: 20px;">
              <ul class="nav navbar-nav">
                <li><a href="index.html" style="color:#000000"><b>Home</b></a></li>
                <li><a href="myplan.html" style="color:#000000"><b>My Plan</b></a></li>
                <li><a href="recommended.html" style="color:#000000"><b>Recommended</b></a></li>
                <li><a href="aboutus.html" style="color:#000000"><b>About Us</b></a></li>
          
               </ul>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"> 
               <ul class="nav navbar-nav navbar-right"> 
                <li>
                  <a href="login.html" style="color:#000000;display: none;" id="header_login">
                    <b> Login</b>
                  </a>
                </li>

                <li> 
                  <a href="customersignup.html" style="color:#000000; display: none;" id="header_signup">
                    <b>Sign Up</b>
                  </a>
                </li>

                <li> 
                  <a href="#" style="color:#000000; display: none;" id="header_logout">
                    <b>Logout</b>
                  </a>
                </li>

              </ul>

            </div>
            
            </div>
          </div>
        </nav>

      </div>
    </div>

    <div class="myplan" style="margin-bottom: 100px;">
    
    <div class="container" id="my_plan" style="margin-top:100px;">

        <div id="titlediv">

          <h3 style="display: inline-block;font-family:'Merienda', cursive; font-size: 50px; font-color:#000000"><b>Brew Your Trip...</b></h3>  
           <a href="savedplans.html"><button id="btn-warning" class="btn btn-success" style="float: right;"><b>Go To My Saved Plans</b></button></a>
         
        </div>

        <div class="row" style="margin-top:20px;">

          <div class="col-md-8">
           
           <div class="panel panel-default"></div>

            <div class="row">

              <div class="col-md-4">
               <h3 style="font-family: 'Shadows Into Light Two', cursive;"> <b>Location </b></h3>
              <div class="dropdown" id="city_to_visit">


                <select name="Select City" id="city" style="font-family: 'Merienda', cursive;width: 200px;height: 34px;">
                  <option value="delhi">Delhi</option>
                  <option value="agra">Agra</option>
                  <option value="rajasthan">Rajasthan</option>
                  <option value="hyderabad">Hyderabad</option>
                </select>

              </div> 

              </div>

              <div class="col-md-8">
                 <div class="container">
                    <div class="row">
                        <div class="col-sm-2" style="margin-right:60px;">
                            <div class="form-group" style="width:200px;" id="start_date">
                            <h3 style="font-family: 'Shadows Into Light Two', cursive;"> <b>Start Date</h3>
                                <div class='input-group date' id='datetimepicker1'>
                                    <input type='text' class="form-control" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                        </div>

                        <div class="col-sm-2">
                            <div class="form-group" style="width:200px;" id="end_date">
                            <h3 style="font-family: 'Shadows Into Light Two', cursive;"> <b>End Date </b></h3>
                                <div class='input-group date' id='datetimepicker2'>
                                    <input type='text' class="form-control" />
                                    <span class="input-group-addon">
                                        <span class="glyphicon glyphicon-calendar"></span>
                                    </span>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>  

              </div>
              

            </div> 
            <div class="row">
            <div class="col-md-6">
              <h3 style="font-family: 'Shadows Into Light Two', cursive;" class="col-md-6"> <b>Adults</b></h3>
              <select name="Select City" id="city" style="font-family: 'Merienda', cursive;width: 200px;height: 34px;">
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
              </div>
              <div class="col-md-6">
              <h3 style="font-family: 'Shadows Into Light Two', cursive;" > <b>Children</b></h3>
              <select name="Select City" id="city" style="font-family: 'Merienda', cursive;width: 200px;height: 34px;">
                  <option value="0">0</option>
                  <option value="1">1</option>
                  <option value="2">2</option>
                  <option value="3">3</option>
                  <option value="4">4</option>
                  <option value="5">5</option>
                  <option value="6">6</option>
                  <option value="7">7</option>
                  <option value="8">8</option>
                  <option value="9">9</option>
                  <option value="10">10</option>
                </select>
              </div>
            </div>


              <hr>


              <div style="font-family: 'Calligraffitti', cursive;">
              <label class="control-label sr-only"> <b>Tell us about your trip? </b></label>
              <textarea name="trip_details" rows="3" cols="50" id="trip_details" class="form-control" placeholder="Please mention the trip details here"></textarea>
              </div>

              <br>
              <div id="activities">

              <table class="table table-striped" style="font-family:'Patrick Hand SC', cursive; font-size: 20px; " >
                <thead id='tablehead' style="display: none;">
                  <tr>
                    <th>Days</th>
                    <th>Activities</th>
                  </tr>
                </thead>
                <tbody id="tablebody">

               </tbody>  
              </table>
              </div>

              <button id="submit" class="btn btn-primary" style="float: left;"><b>Submit</b></button>
              <br> 
              <br>


            </div>

            <div class="col-md-4">
              <div class="thumbnail">

                  <img src="recpics/taj.jpg" alt="agra fort">
                  <div class="caption">
                    <h3 style="font-family:'Grand Hotel', cursive; font-size: 40px">Taj Mahal</h3>
                    <p style="font-family:'Mallanna', sans-serif; font-size: 20px">
                    <b>Location: Agra, India</b> </p><br>
                  </div>
                </div>

                <hr>

                <div class="thumbnail">

                  <img src="recpics/lotustemple.jpg" alt="agra fort">
                  <div class="caption">
                    <h3 style="font-family:'Grand Hotel', cursive; font-size: 40px">Lotus Temple</h3>
                    <p style="font-family:'Mallanna', sans-serif; font-size: 20px">
                    <b>Location: Delhi, India</b> </p><br>
                  </div>
                </div>
              
            </div>

          </div>

    </div>

    <div class="container" id="plan_public">

      <div class="jumbotron" style="background-color: transparent  !important;">
        <h2 style="font-family:'Delius', cursive; margin-top: 200px"><b>To Make Your Own Customizable Vacation....</h2></b>
        <p class="lead" style="font-family: 'Merienda', cursive;"> Please <a href="login.html"> Login </a> or <a href="customersignup.html"> Sign-up </a>!!</p>
      </div>


    </div>

    

      <!-- FOOTER -->
  <footer>
        <p class="pull-right"><a href="#"></a></p>
        <p style="font-size:20px; font-family:'Indie Flower',cursive !important;"> &copy; 2017 TripBrew Company, Inc. &middot;<a href="vendorsignup.html" class="pull-right">Go To Vendor Page</a></p>
      </footer>

  <script type="text/javascript" src="bower_components/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="bower_components/moment/min/moment.min.js"></script>
  <script type="text/javascript" src="bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>


  <!-- Include your style sheets at the bottom of the page: -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/holder.min.js"></script>
  <script type="text/javascript" src="js/ie10-viewport-bug-workaround.js"></script>

  <script src="https://www.gstatic.com/firebasejs/4.1.3/firebase.js"></script>
 

  <script type="text/javascript" src= "js/custom.js"></script>

    <script type="text/javascript">
            function onChangeDate() {
                start = $('#datetimepicker1').data("DateTimePicker").date();
                end = $('#datetimepicker2').data("DateTimePicker").date();
                if (start && end) {
                  days = end.diff(start, 'days')+1;
                  if (days > 0) {
                    $('#tablehead').show();
                  } else {
                    $('#tablehead').hide();
                  }
                  saved_text = []
                  counter = 0
                  while(true) {
                    if ($('#activitytext'+counter).length > 0) {
                      saved_text.push($('#activitytext'+counter).val());
                    } else {
                      break;
                    }
                    counter+=1;
                  }
                  $('#tablebody').html('');
                  for (var i =0 ; i < days; i++) {
                    $('#tablebody').append('<tr><td>' + (i+1) + '</td><td><form><input type="text" name="place..." class="activitytext" id="activitytext'+i+'"><br> </form></td></td></tr>');
                    $('activitytext'+i).val(saved_text[i]);
                  }
                } else {
                  $('#tablehead').hide();
                }
            }
            $(function () {
                $('#datetimepicker1').datetimepicker().on('dp.change', onChangeDate);;
                $('#datetimepicker2').datetimepicker().on('dp.change', onChangeDate);
            });
    </script>

    <script type="text/javascript">
      $('#logout').click(function(){

    firebase.auth().signOut().then(function() {
      // Sign-out successful.
    }).catch(function(error) {
      
    });

  });
    </script>

    <script type="text/javascript">
    
      $('#submit').click(function(){
          console.log("submit clicked")

        var activities = [];

        $('.activitytext').each(function(key,value){
          activities.push($(value).val());
        })

        var planData = {
          uid: firebase.auth().currentUser.uid,
          city: $('#city').val(),
          startDate: $('#datetimepicker1').data("DateTimePicker").date().toString(),
          endDate: $('#datetimepicker2').data("DateTimePicker").date().toString(),
          tripDetails: $('#trip_details').val(),
          activities: activities,
          email: user.email,
          price: -1
        }

        var newPostKey = firebase.database().ref('plans').child('plans').push().key;
        console.log("New key is " + newPostKey);
        var updates = {};
        updates['/plans/'+newPostKey] = planData;
        firebase.database().ref().update(updates).then(function(){window.location="savedplans.html";});
        console.log("Updated");
       

      });
    </script>

    <script type="text/javascript">
      
    firebase.auth().onAuthStateChanged(function(user) {

    if(user){

      // Signed in

      $('#my_plan').show();
      $('#plan_public').hide();

      


    }else{

      // Not Signed In

     
      $('#my_plan').hide();
      $('#plan_public').show();

    }


  });

   
    </script>

  </body>
</html>